<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <title>더리얼마케팅 전자영수증</title>
    
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <link rel="stylesheet" media="all" href="../code/layout.css" />
    <link rel="stylesheet" media="all" href="../code/common.css" />

    <!-- main -->
	<script src="../code/jquery.bxslider.min.js"></script>
    <link href="../code/jquery.bxslider.css" rel="stylesheet" />
    
    <!-- tab -->
	<script type='text/javascript' src='../code/tabs.js'></script>
    
    <!-- scroll -->
	<script src="../code/fm.scrollator.jquery.js"></script>
	<link rel="stylesheet" href="../code/fm.scrollator.jquery.css" />
    
    <!-- Path to your custom app styles-->
    <link rel="stylesheet" href="../css/my-app.css">
    
	<script src="../code/common.js"></script>
    <style type="text/css">
		input::-webkit-input-placeholder {
		    font-size: 12px;
		}    
    </style>
</head>

<body>


    <div class="views">
		<div class="view view-main">
        
            <div class="navbar">
                
                <div data-page="agree01" class="navbar-inner cached">
                <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><span>Back</span></a></div>
                <div class="center sliding">개인정보 수집이용취급위탁 동의</div>
                </div>
                
                
                <div data-page="agree02" class="navbar-inner cached">
                <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><span>Back</span></a></div>
                <div class="center sliding">고유식별정보동의</div>
                </div>

                
                <div data-page="agree03" class="navbar-inner cached">
                <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><span>Back</span></a></div>
                <div class="center sliding">본인확인서비스 이용약관</div>
                </div>

                
                <div data-page="agree04" class="navbar-inner cached">
                <div class="left sliding"><a href="#" class="back link"> <i class="icon icon-back"></i><span>Back</span></a></div>
                <div class="center sliding">통신사 이용약관</div>
                </div>

            </div>        
        
			<div class="pages navbar-through toolbar-through">

                <div data-page="index" class="page">

                    <div class="page-content">
                    
                        <div class="list-block">
            	
                            <div class="alen_allcheck">
                                <label class="label-checkbox item-content">
                                  <input type="checkbox" name="ks-checkbox" id="allCheck" value="전체약관에 동의 합니다.">
                                  <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                  <div class="item-inner">
                                    <div class="item-title">전체약관에 동의 합니다.</div>
                                  </div>
                                </label>
                            </div>


                            <ul>
                              <li class="agree_tab">
                              	<div class="agree_chbox">
                                    <label class="label-checkbox item-content" style="width:50px;">
                                    <input type="checkbox" name="subCheck" value="개인정보 수집이용취급위탁 동의">
                                    <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                    </label>
                                </div>
                                
                                <div class="agree_detail">
                                    <a href="#agree01" class="item-link">
                                    <div class="item-content">
                                        <div class="item-inner"> 
                                        <div class="item-title">개인정보 수집이용취급위탁 동의</div>
                                        </div>
                                    </div>
                                    </a>
                                </div>
                                
                                <hr>
                              </li>
                              
                              
                              <li class="agree_tab">
                              	<div class="agree_chbox">
                                    <label class="label-checkbox item-content" style="width:50px;">
                                    <input type="checkbox" name="subCheck" value="고유식별정보동의">
                                    <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                    </label>
                                </div>
                                
                                <div class="agree_detail">
                                    <a href="#agree02" class="item-link">
                                    <div class="item-content">
                                        <div class="item-inner"> 
                                        <div class="item-title">고유식별정보동의</div>
                                        </div>
                                    </div>
                                    </a>
                                </div>
                                
                                <hr>
                              </li>
                              
                              
                              <li class="agree_tab">
                              	<div class="agree_chbox">
                                    <label class="label-checkbox item-content" style="width:50px;">
                                    <input type="checkbox" name="subCheck" value="본인확인서비스 이용약관">
                                    <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                    </label>
                                </div>
                                
                                <div class="agree_detail">
                                    <a href="#agree03" class="item-link">
                                    <div class="item-content">
                                        <div class="item-inner"> 
                                        <div class="item-title">본인확인서비스 이용약관</div>
                                        </div>
                                    </div>
                                    </a>
                                </div>
                                
                                <hr>
                              </li>
                              
                              
                              <li class="agree_tab">
                              	<div class="agree_chbox">
                                    <label class="label-checkbox item-content" style="width:50px;">
                                    <input type="checkbox" name="subCheck" value="통신사 이용약관">
                                    <div class="item-media"><i class="icon icon-form-checkbox"></i></div>
                                    </label>
                                </div>
                                
                                <div class="agree_detail">
                                    <a href="#agree04" class="item-link">
                                    <div class="item-content">
                                        <div class="item-inner"> 
                                        <div class="item-title">통신사 이용약관</div>
                                        </div>
                                    </div>
                                    </a>
                                </div>
                                
                                <hr>
                              </li>

                            </ul>
                        </div>                    
                    
                    
                        <!-- <div class="agree_logobox"><img src="../common/agree_logo.png"></div> -->
                        
 
                    	<div class="join_box">
                        	<ul>
                            	<li class="full_input"><input type="text" placeholder="이름" id="userNm" maxlength="10" ></li>
                                
                            	<li class="full_input"><input type="text" placeholder="이메일"  id="eMail" maxlength="30" onblur="fn_joinChkId()"></li>

                            	<li class="full_input"><input type="text" placeholder="비밀번호"  id="pwd" maxlength="30"></li>
                                
                            	<li class="full_input"><input type="text" onkeydown = "onlyNumberInput()" placeholder="생년월일(ex:19901010)"  id="birthDay" maxlength="8"></li>
                            	
                                
                            	<li>
                                <div class="alen_radio_box" id ="sexDiv">
                                    <div class="alen_table_half">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="sex" value="1">
                                      <div class="item-inner">
                                        <div class="item-title" id="man">남자</div>
                                      </div>
                                    </label>
                                    </div>
                                    
                                    
                                    <div class="alen_table_half alen_table_last">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="sex" value="0">
                                      <div class="item-inner">
                                        <div class="item-title" id="woman">여자</div>
                                      </div>
                                    </label>
                                    </div>
                                    <hr>
                                
                                </div>
                                </li>
                            </ul>
                        </div>
                        
                    	<div class="join_box">
                        	<ul>
                        	
	                          	<li class="full_input">
	                               <select id="selectTelCom">
	                                   <option value="01">SKT</option>
	                                   <option value="02">KT</option>
	                                   <option value="03">LGu+</option>
	                                   <option value="04">알뜰폰 SKT</option>
	                                   <option value="05">알뜰폰 KT</option>
	                                   <option value="06">알뜰폰 LGu+</option>
	                               </select>
	                             </li>                                     
                            	<li class="full_input"><input type="text" onkeydown = "onlyNumberInput()" placeholder="휴대폰 번호" id="telNo"></li>
                            	<li class="full_input"><input type="hidden" placeholder="유일키번호" id="uuId"></li>
                                
                            	<li>
                                <div class="alen_radio_box" >
                                    <div class="alen_table_half">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="nation" value="1">
                                      <div class="item-inner">
                                        <div class="item-title">내국인</div>
                                      </div>
                                    </label>
                                    </div>
                                    
                                    
                                    <div class="alen_table_half alen_table_last">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="nation" value="2">
                                      <div class="item-inner">
                                        <div class="item-title">외국인</div>
                                      </div>
                                    </label>
                                    </div>
                                    <hr>
                                
                                </div>
                                </li>
                                
                            	<li>
                                <div class="alen_table_title">
                                <div class="tel_btn" id="recNum">인증번호 받기</div>
                                </div>
                                
                                <div class="alen_table_con">
                                     <div class="alen_table_half2">
                                      <input type="text" placeholder="인증번호입력" id="certNum" onkeydown = "onlyNumberInput()" maxlength="6">
                                    </div>
                                    
                                    
                                    <div class="alen_table_half alen_table_last">
                                      <input readonly="readonly" type="text" placeholder="남은시간" id="certNumView" style="text-align: right;">
                                    </div>
                                </div>
                                
                                <hr>
                                </li>
                                
                            </ul>
                            
                            
                        </div>
                        
                        <div class="agree_btnbox" id="agreeComple">
                            <div class="agree_btn">완료</div>
                        </div>
                    
                    
                    </div>
                </div>
                
                
               <div data-page="agree01" class="page cached">
                    <div class="page-content">
                        <div class="content-block">
                        <p>
제1조(목적)<br>
이 약관은 패션에비뉴 회사(전자상거래 사업자)가 운영하는 패션에비뉴 사이버 패션에비뉴(이하 패션에비뉴이라 한다)에서 제공하는 인터넷 관련 서비스(이하 “서비스”라 한다)를 이용함에 있어 사이버 패션에비뉴과 이용자의 권리?의무 및 책임사항을 규정함을 목적으로 합니다.<br>
<br>
※「PC통신, 무선 등을 이용하는 전자상거래에 대해서도 그 성질에 반하지 않는 한 이 약관을 준용합니다」<br>
<br>
제2조(정의)<br>
①패션에비뉴 이란 패션에비뉴 회사가 재화 또는 용역(이하 “재화등”이라 함)을 이용자에게 제공하기 위하여 컴퓨터등 정보통신설비를 이용하여 재화등을 거래할 수 있도록 설정한 가상의 영업장을 말하며, 아울러 사이버패션에비뉴을 운영하는 사업자의 의미로도 사용합니다.<br>
②“이용자”란 패션에비뉴에 접속하여 이 약관에 따라 패션에비뉴이 제공하는 서비스를 받는 회원 및 비회원을 말합니다.<br>
③ ‘회원’이라 함은 패션에비뉴에 개인정보를 제공하여 회원등록을 한 자로서, 패션에비뉴의 정보를 지속적으로 제공받으며, 패션에비뉴이 제공하는 서비스를 계속적으로 이용할 수 있는 자를 말합니다.<br>
④ ‘비회원’이라 함은 회원에 가입하지 않고 패션에비뉴이 제공하는 서비스를 이용하는 자를 말합니다.<br>

                        </p>
                        </div>
                    </div>
                </div>


                <div data-page="agree02" class="page cached">
                    <div class="page-content">
                        <div class="content-block">
                        <p>
제1조(목적)<br>
이 약관은 패션에비뉴 회사(전자상거래 사업자)가 운영하는 패션에비뉴 사이버 패션에비뉴(이하 패션에비뉴이라 한다)에서 제공하는 인터넷 관련 서비스(이하 “서비스”라 한다)를 이용함에 있어 사이버 패션에비뉴과 이용자의 권리?의무 및 책임사항을 규정함을 목적으로 합니다.<br>
<br>
※「PC통신, 무선 등을 이용하는 전자상거래에 대해서도 그 성질에 반하지 않는 한 이 약관을 준용합니다」<br>
<br>
제2조(정의)<br>
①패션에비뉴 이란 패션에비뉴 회사가 재화 또는 용역(이하 “재화등”이라 함)을 이용자에게 제공하기 위하여 컴퓨터등 정보통신설비를 이용하여 재화등을 거래할 수 있도록 설정한 가상의 영업장을 말하며, 아울러 사이버패션에비뉴을 운영하는 사업자의 의미로도 사용합니다.<br>
②“이용자”란 패션에비뉴에 접속하여 이 약관에 따라 패션에비뉴이 제공하는 서비스를 받는 회원 및 비회원을 말합니다.<br>
③ ‘회원’이라 함은 패션에비뉴에 개인정보를 제공하여 회원등록을 한 자로서, 패션에비뉴의 정보를 지속적으로 제공받으며, 패션에비뉴이 제공하는 서비스를 계속적으로 이용할 수 있는 자를 말합니다.<br>
④ ‘비회원’이라 함은 회원에 가입하지 않고 패션에비뉴이 제공하는 서비스를 이용하는 자를 말합니다.<br>

                        </p>
                        </div>
                    </div>
                </div>


                <div data-page="agree03" class="page cached">
                    <div class="page-content">
                        <div class="content-block">
                        <p>
제1조(목적)<br>
이 약관은 패션에비뉴 회사(전자상거래 사업자)가 운영하는 패션에비뉴 사이버 패션에비뉴(이하 패션에비뉴이라 한다)에서 제공하는 인터넷 관련 서비스(이하 “서비스”라 한다)를 이용함에 있어 사이버 패션에비뉴과 이용자의 권리?의무 및 책임사항을 규정함을 목적으로 합니다.<br>
<br>
※「PC통신, 무선 등을 이용하는 전자상거래에 대해서도 그 성질에 반하지 않는 한 이 약관을 준용합니다」<br>
<br>
제2조(정의)<br>
①패션에비뉴 이란 패션에비뉴 회사가 재화 또는 용역(이하 “재화등”이라 함)을 이용자에게 제공하기 위하여 컴퓨터등 정보통신설비를 이용하여 재화등을 거래할 수 있도록 설정한 가상의 영업장을 말하며, 아울러 사이버패션에비뉴을 운영하는 사업자의 의미로도 사용합니다.<br>
②“이용자”란 패션에비뉴에 접속하여 이 약관에 따라 패션에비뉴이 제공하는 서비스를 받는 회원 및 비회원을 말합니다.<br>
③ ‘회원’이라 함은 패션에비뉴에 개인정보를 제공하여 회원등록을 한 자로서, 패션에비뉴의 정보를 지속적으로 제공받으며, 패션에비뉴이 제공하는 서비스를 계속적으로 이용할 수 있는 자를 말합니다.<br>
④ ‘비회원’이라 함은 회원에 가입하지 않고 패션에비뉴이 제공하는 서비스를 이용하는 자를 말합니다.<br>

                        </p>
                        </div>
                    </div>
                </div>


                <div data-page="agree04" class="page cached">
                    <div class="page-content">
                        <div class="content-block">
                        <p>
제1조(목적)<br>
이 약관은 패션에비뉴 회사(전자상거래 사업자)가 운영하는 패션에비뉴 사이버 패션에비뉴(이하 패션에비뉴이라 한다)에서 제공하는 인터넷 관련 서비스(이하 “서비스”라 한다)를 이용함에 있어 사이버 패션에비뉴과 이용자의 권리?의무 및 책임사항을 규정함을 목적으로 합니다.<br>
<br>
※「PC통신, 무선 등을 이용하는 전자상거래에 대해서도 그 성질에 반하지 않는 한 이 약관을 준용합니다」<br>
<br>
제2조(정의)<br>
①패션에비뉴 이란 패션에비뉴 회사가 재화 또는 용역(이하 “재화등”이라 함)을 이용자에게 제공하기 위하여 컴퓨터등 정보통신설비를 이용하여 재화등을 거래할 수 있도록 설정한 가상의 영업장을 말하며, 아울러 사이버패션에비뉴을 운영하는 사업자의 의미로도 사용합니다.<br>
②“이용자”란 패션에비뉴에 접속하여 이 약관에 따라 패션에비뉴이 제공하는 서비스를 받는 회원 및 비회원을 말합니다.<br>
③ ‘회원’이라 함은 패션에비뉴에 개인정보를 제공하여 회원등록을 한 자로서, 패션에비뉴의 정보를 지속적으로 제공받으며, 패션에비뉴이 제공하는 서비스를 계속적으로 이용할 수 있는 자를 말합니다.<br>
④ ‘비회원’이라 함은 회원에 가입하지 않고 패션에비뉴이 제공하는 서비스를 이용하는 자를 말합니다.<br>

                        </p>
                        </div>
                    </div>
                </div>                
                

			</div>

		</div>
    </div>




<script type="text/javascript" src="../js/framework7.js"></script>

<script type="text/javascript" src="../js/my-app.js"></script>
   <script type="text/javascript" charset="utf-8" src="../cordova.js"></script>
<script type="text/javascript" charset="utf-8" src="../telephonenumber.js"></script>
<input value="activate scrollator" id="activate_scrollator4" type="button"  style="display:none;">
<script type="text/javascript">
//전체동의여부 변수값.
var agreeDiv = false;
var reSendYn = false;
//var smsSvcTxSeqno = "";
var smsMemId = "V27340000000";           
var smsServerIp = "x";      
var smsSiteUrl = "117.52.97.40:80";      
var smsSiteDomain = "샤샥스토어"; 
//var smsEndPointURL = "http://safe.ok-name.co.kr/KcbWebService/OkNameService";    
var smsEndPointURL ="http://tsafe.ok-name.co.kr:29080/KcbWebService/OkNameService";    
var smsLogPath = "/LOGS";
var a = "";
var year = "";
var month = "";
var date = "";
var hours = "";
var minutes = "";
var seconds = "";
var toDay = "";
var smsSvcTxSeqno = "";
var smsOption = "";


var userNm		= "";
var eMail       = "";
var birthDay    = "";
var sex         = "";
var nation      = "";
var tService    = "";
var smsCertNo     = "";
var telNo       = "";
var pwd         = "";
var uuId        = "";
var pushKey = "";

$(document).ready(function(){
	
	document.addEventListener("deviceready", onDeviceReady, false);
	$("#recNum").click(function(){
		
		console.log("@@@pushKey100001@@@"+pushKey);
	      var smsReSndYn = "";
	      var smsRsv1 = "0";
	      var smsRsv2 = "0";
	      var smsRqstMsrCd ="10";  
	      var smsRqstCausCd = "00";
	      var smsOption = "JU";   

	         a  = new Date();   
	         year  = a.getFullYear();
	         month = a.getMonth()+1;
	         date = a.getDate();
	         hours = a.getHours();
	         minutes = a.getMinutes();
	         seconds = a.getSeconds();	      
	         toDay = String(year)+String(month)+String(date)+String(hours)+String(minutes)+String(seconds);	         
	      
	      if(reSendYn){
	         //재전송시
	         smsReSndYn = "Y";   

			 smsSvcTxSeqno = toDay+($("#telNo").val());
	      }else{
	         //최초전송시
			 smsSvcTxSeqno = toDay+($("#telNo").val());
	         smsReSndYn = "N";   
	      }
//-----------------------------------------
//KCB 본인확인 번호요청
//-----------------------------------------
		
	        $.ajax({
	              type: "post",
	              url : commonIp()+"/theReal/receipt/KcbCertified.do",
	              data: {
	                    smsSvcTxSeqno     : smsSvcTxSeqno,
	                    smsName           : alltrim($("#userNm").val()),  
	                    smsBirthday       : alltrim($("#birthDay").val())   ,
	                    smsGender         : $(':radio[name="sex"]:checked').val(),
	                    smsNation         : $(':radio[name="nation"]:checked').val(),
	                    smsComCd          : $("#selectTelCom option:selected").val(),  
	                    smsMbphnNo        : alltrim($("#telNo").val()),
	                    smsReSndYn        : smsReSndYn ,
	                    smsRsv1           : smsRsv1, 
	                    smsRsv2           : smsRsv2, 
	                    smsRqstMsrCd      : smsRqstMsrCd, 
	                    smsRqstCausCd     : smsRqstCausCd, 
	                    smsMemId          : smsMemId, 
	                    smsServerIp       : smsServerIp, 
	                    smsSiteUrl        : smsSiteUrl, 
	                    smsSiteDomain     : smsSiteDomain, 
	                    smsEndPointURL    : smsEndPointURL, 
	                    smsLogPath        : smsLogPath, 
	                    smsOption         : smsOption 
	                 },
	              success: fnKcbCertified,
	              error: whenError
	             });  	
	})
	
 	$(".alen_allcheck").click(function(){
		//만약 전체 선택 체크박스가 체크된상태일경우
		if($("#allCheck").prop("checked")) {
			//해당화면에 전체 checkbox들을 체크해준다
			$("input[name='subCheck']").prop("checked",false);
		// 전체선택 체크박스가 해제된 경우
		} else {
			//해당화면에 모든 checkbox들의 체크를해제시킨다.
			$("input[name='subCheck']").prop("checked",true);
		}
	})
	
	
	$("#agreeComple").click(function(){
		
		console.log("@@@pushKey11111@@@"+pushKey);
		
		userNm 		= alltrim($("#userNm").val());
		eMail		= alltrim($("#eMail").val());
		birthDay	= alltrim($("#birthDay").val());
		sex 		= $(':radio[name="sex"]:checked').val();
		nation 		= $(':radio[name="nation"]:checked').val();
		tService 	= $("#selectTelCom option:selected").val();
		smsCertNo 	= alltrim($("#certNum").val());
		telNo 		= alltrim($("#telNo").val());
		pwd 		= alltrim($("#pwd").val());
		uuId 		= alltrim($("#uuId").val());	

  		if(!chkPwd(pwd)){
  			alert("비밀번호");
			$('#pwd').val('');
			$('#pwd').focus();
			return false;
  		}    		
    	
    	//전체 체크박스 갯수 구하기
		var totalChkLen = $("input[name*='subCheck']").length ;
		
		//선택된 체크박스 갯수 구하기
		var selChkLen = $("input[name*='subCheck']:checked").length ;
		if(totalChkLen > selChkLen){
			alert("약관 동의해주시기 바랍니다.");
			return false;
		}    	
    	
		//isNull함수가 true이면 빈값; 
		if(isNull(userNm)){
			alert("이름을 기입해주시기 바랍니다.");  
			return false;
		}
		if(isNull(eMail)){
			alert("이메일을 기입해주시기 바랍니다.");  
			return false;
		}else {
			if(!emailcheck(eMail)){
				alert("이메일을 정확하게 기입해주시기 바랍니다.");  
				return false;
			};
		}
		if(isNull(birthDay)){
			alert("생년월일을 기입해 주시기바랍니다.");  
			return false;
		}
		if(isNull(sex)){
			alert("성별을 체크해주시기 바랍니다.");  
			return false;
		}
		if(isNull(nation)){
			alert("내/외국인 구분을 체크해주시기 바랍니다.");  
			return false;
		}
		if(isNull(tService)){
			alert("이동통신사를 체크해주시기 바랍니다.");  
			return false;
		}
		if(isNull(certNum)){
			alert("인증번호를 기입해주시기 바랍니다.");  
			return false;
		}
		if(isNull($("#certNumView").val())){
			alert("인증번호를 재발급 받으시기 바랍니다.");
			return false;
		}		
		
		
        smsOption = "MU";
        alert("인증번호=="+smsCertNo);
     
        
      $.ajax({
             type: "post",
             url : commonIp()+"/theReal/receipt/KcbVerification.do",
             data: {
                 smsSvcTxSeqno   : smsSvcTxSeqno,
                 smsMbphnNo      : alltrim($("#telNo").val()),
                 smsCertNo      : smsCertNo,
                 smsMemId       : smsMemId, 
                 smsServerIp    : smsServerIp, 
                 smsEndPointURL   : smsEndPointURL, 
                 smsLogPath       : smsLogPath, 
                 smsOption       : smsOption 
             },
             success: fnKcbVerification,
             error: whenError
         });       
         
	})
	
});
	
	

     function onDeviceReady() {
    	 //onPushSet();
         var uuid = device.uuid;

				console.log("device.uuid:"+device.uuid);

                 var telephoneNumber = cordova.require("cordova/plugin/telephonenumber");
                 
                 
                 telephoneNumber.get(function(result) {
                         console.log("result = " + result);
                         result = result.replace( "+82", "0");
						$("#telNo").val(result);          
						$("#uuId").val(result+uuid);          
                     }, function() {
                    	 $("#telNo").val("");     
                     });


     }
	
		
	

	





	   var min = 0;
	   var sec = 0;
	   var time = 0;
	   var runCount;
	   
	   // 시작 함수 호출 시
	   function fncCountDown() {
	   
	    // 입력 값 셋팅
	   
	    if ( time.length > 0 ) {
	     runCount = setInterval("startCountDown()", 1000);
	   
	    } else {
	     alert("값을 입력 해 주세요");
	     return;
	   
	    }
	   }
	   
	   // 카운트 다운 및 노출하기
	   function startCountDown() {
	   
	    min = parseInt((time%3600)/60);
	    sec = time%60;
	    //console.log(min + " : " + sec);
	    $("#certNumView").val(min + " : " + sec);
	   
	    // 시간이 다 됐을 시 timer 정지
	    if ( parseInt(time) == 0 ) {
	       $("#certNumView").val("");
	     stopCountDown();
	   
	    } else {
	     time--;
	    }
	   
	   }

	// 타이머 정지
	function stopCountDown() {
	   clearInterval(runCount);
	}

	function fnSucData(resdata){
	   if(resdata == 1){
	      alert("회원가입에 성공하였습니다.");
			window.localStorage.setItem("id", eMail);
	       	window.localStorage.setItem("pw", pwd);				      
	      location.href='index.html?uuId='+uuId+'&telNo='+telNo;
	   }else{
		   alert("회원가입에 실패하였습니다.");
	   }
	}

	// KCB 문자인증번호 요청 
	function fnKcbCertified(resdata){
	   if(resdata == 1){
		reSendYn = true;
		time = "180";
		clearInterval(runCount);
		fncCountDown();		
	   }else{
			reSendYn = true;
		   alert("인증번호받기에 실패했습니다.");
	   }
	}


	//문자인증번호 검증 회원 가입 
	function fnKcbVerification(resdata){
		console.log("@@@pushKey2222@@@"+pushKey);
	   if(resdata == 1){
		      $.ajax({
		          type: "post",
		          url : commonIp()+"/theReal/receipt/appMemberInsert.do",
		          data: {
		             userNm     : userNm,  
		             eMail         : eMail,   
		             birthDay      : birthDay,
		             sex           : sex,
		             nation        : nation,  
		             tService      : tService,
		             telNo       : telNo ,
		             uuId          : uuId, 
		             pwd          : pwd, 
		             pushKey          : pushKey, 
		          },
		          success: fnSucData,
		          error: whenError
		         });  	
	   }
	}

	function fn_joinChkId(){
	      $.ajax({
	          type: "post",
	          url : commonIp()+"/theReal/receipt/joinChkId.do",
	          data: {
	             eMail         : alltrim($("#eMail").val()),   
	          },
	          success: fn_sucJoinChkId,
	          error: whenError
	         });  		
	}

	function fn_sucJoinChkId(resdata){
		if(resdata == 1){
			alert("중복 아이디 입니다.");
			$("#eMail").val("");
			$("#eMail").focus();
		}
	}

	function fnCertSucData(resdata){
	alert("인증번호를 3분내에 입력하세요");
	}

	function whenError(){
	   alert("실패.");
	}
	
	
	
	function onPushSet(){
		  console.log(device.platform);

		  if(device.platform.toUpperCase() == 'ANDROID'){
		    window.plugins.pushNotification.register(successHandler,errorHandler, {
		      //"senderID" : "912734728084", // Google GCM 서비스에서 생성한 Project Number를 입력한다.
		      "senderID" : "416114430430", // Google GCM 서비스에서 생성한 Project Number를 입력한다.
		      "ecb" : "onNotificationGCM" // 디바이스로 푸시가 오면 onNotificationGCM 함수를 실행할 수 있도록 ecb(event callback)에 등록한다.
		    });
		  }	
	}

	// app.initialize();

	/**
	 * tokenHandler
	 *
	 * @param result
	 *
	 * 디바이스 토큰핸들러 콜백함수.
	 * 푸시 서비스를 활성화 하였을 때, window.plugins.pushNotification.register 메소드가 실행되면서 디바이스 토큰을 가져와서 출력한다.
	 * 만약에 푸시 서버로 디바이스 토큰을 보내야할 경우 이 함수 안에서 서버로 디바이스 토큰을 전송하면 된다.
	 */
	function tokenHandler(result){
	  console.log('deviceToken:' + result);
	}

	/**
	 * errorHandler
	 *
	 * @param err
	 *
	 * 에러 핸들러 콜백 함수.
	 */
	function errorHandler(err){
	  console.log('error:' + err);
	}

	/**
	 * successHandler
	 *
	 * @param result
	 *
	 * 디바이스로 푸시 메세지를 받았을 때 뱃지처리 이후 호출하는 콜백함수
	 */
	function successHandler(result){
	  console.log('result:'+result);
	}

	/**
	 * onNotificationGCM
	 *
	 * @param e
	 *
	 * 안드로이드 디바이스로 푸시 메세지를 받을 때 호출되는 함수, window.plugins.pushNotification.register 옵션에 설정에서 ecb의 이름에 매칭된다.
	 */
	function onNotificationGCM (e){
	  switch (e.event) {
	  case 'registered': // 안드로이드 디바이스의 registerID를 획득하는 event 중 registerd 일 경우 호출된다.
	    console.log('registerID:' + e.regid);
	  	pushKey = e.regid;
	    console.log('@@@pushKey@@@:' + pushKey);
	    break;
	  case 'message': // 안드로이드 디바이스에 푸시 메세지가 오면 호출된다.
	    {
	        console.log(':' + e);
	      if (e.foreground){ // 푸시 메세지가 왔을 때 앱이 실행되고 있을 경우
	        var soundfile = e.soundname || e.payload.sound;
	        var my_media = new Media("/android_asset/www/" + soundfile);
	        my_media.play();
	      } else { // 푸시 메세지가 왔을 때 앱이 백그라운드로 실행되거나 실행되지 않을 경우
	        if (e.coldstart) { // 푸시 메세지가 왔을 때 푸시를 선택하여 앱이 열렸을 경우
	          console.log("알림 왔을 때 앱이 열리고 난 다음에 실행 될때");
	        } else { // 푸시 메세지가 왔을 때 앱이 백그라운드로 사용되고 있을 경우
	          console.log("앱이 백그라운드로 실행될 때");
	        }
	      }

	      console.log(decodeURI(e.payload.title));
	      console.log(decodeURI(e.payload.message));
	      //navigator.notification.alert(decodeURI(e.payload.msg));
	      
	      navigator.notification.alert(
	    		  decodeURI(e.payload.message),  // message
	    		    '',         // callback
	    		    decodeURI(e.payload.title),            // title
	    		    '확인2222'                  // buttonName
	    		);                  
	    }
	    break;
	  case 'error': // 푸시 메세지 처리에 에러가 발생하면 호출한다.
	    console.log('error:' + e.msg);
	    break;
	  case 'default':
	    console.log('알수 없는 이벤트');
	    break;
	  }
	}	


</script>
</body>
</html>
