<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <title>더리얼마케팅 전자영수증</title>
    
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <link rel="stylesheet" media="all" href="../code/layout.css" />
    <link rel="stylesheet" media="all" href="../code/common.css" />

    <!-- main -->
	<script src="../code/jquery.bxslider.min.js"></script>
    <link href="../code/jquery.bxslider.css" rel="stylesheet" />
    
    <!-- tab -->
	<script type='text/javascript' src='../code/tabs.js'></script>
    
    <!-- scroll -->
	<script src="../code/fm.scrollator.jquery.js"></script>
	<link rel="stylesheet" href="../code/fm.scrollator.jquery.css" />
    
    <!-- Path to your custom app styles-->
    <link rel="stylesheet" href="../css/my-app.css">
    
	<script src="../code/common.js"></script>
    <style type="text/css">
		input::-webkit-input-placeholder {
		    font-size: 12px;
		}    
    </style>
</head>

<body>


    <div class="views">
		<div class="view view-main">
        
        
        
			<div class="pages navbar-through toolbar-through">

                <div data-page="index" class="page">

                    <div class="page-content">
                    
                        <div class="agree_logobox"><img src="../common/agree_logo.png"></div>
                        
 
                    	<div class="join_box">
                        	<ul>
                            	<li class="full_input"><input type="text" placeholder="이름" id="userNm" maxlength="10" ></li>
                                
                            	<li class="full_input"><input type="text" placeholder="이메일"  id="eMail" maxlength="30"></li>
                                
                            	<li class="full_input"><input type="text" onkeydown = "onlyNumberInput()" placeholder="생년월일(ex:901010)"  id="birthDay" maxlength="6"></li>
                            	
                                
                            	<li>
                                <div class="alen_radio_box" id ="sexDiv">
                                    <div class="alen_table_half">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="sex" value="01">
                                      <div class="item-inner">
                                        <div class="item-title" id="man">남자</div>
                                      </div>
                                    </label>
                                    </div>
                                    
                                    
                                    <div class="alen_table_half alen_table_last">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="sex" value="02">
                                      <div class="item-inner">
                                        <div class="item-title" id="woman">여자</div>
                                      </div>
                                    </label>
                                    </div>
                                    <hr>
                                
                                </div>
                                </li>
                            </ul>
                        </div>
                        
                    	<div class="join_box">
                        	<ul>
                            	<li class="full_input"><input type="text" placeholder="휴대폰 번호" id="telNo"></li>
                                
                            	<li>
                                <div class="alen_radio_box">
                                    <div class="alen_table_quad">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="tservice" value="01">
                                      <div class="item-inner">
                                        <div class="item-title">SKT</div>
                                      </div>
                                    </label>
                                    </div>
                                    
                                    
                                    <div class="alen_table_quad">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="tservice" value="02">
                                      <div class="item-inner">
                                        <div class="item-title">KT</div>
                                      </div>
                                    </label>
                                    </div>
                                    
                                    
                                    <div class="alen_table_quad">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="tservice" value="03">
                                      <div class="item-inner">
                                        <div class="item-title">U+</div>
                                      </div>
                                    </label>
                                    </div>
                                    
                                    
                                    <div class="alen_table_quad alen_table_last">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="tservice" value="04">
                                      <div class="item-inner">
                                        <div class="item-title">알뜰폰</div>
                                      </div>
                                    </label>
                                    </div>
                                    <hr>
                                
                                </div>
                                </li>
                                
                            	<li>
                                <div class="alen_radio_box" >
                                    <div class="alen_table_half">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="nation" value="01">
                                      <div class="item-inner">
                                        <div class="item-title">내국인</div>
                                      </div>
                                    </label>
                                    </div>
                                    
                                    
                                    <div class="alen_table_half alen_table_last">
                                    <label class="label-radio item-content">
                                      <input type="radio" name="nation" value="02">
                                      <div class="item-inner">
                                        <div class="item-title">외국인</div>
                                      </div>
                                    </label>
                                    </div>
                                    <hr>
                                
                                </div>
                                </li>
                                
                            	<li>
                                <div class="alen_table_title">
                                <div class="tel_btn" id="recNum">인증번호 받기</div>
                                </div>
                                
                                <div class="alen_table_con">
                                     <div class="alen_table_half2">
                                      <input type="text" placeholder="인증번호입력" id="certNum" onkeydown = "onlyNumberInput()" maxlength="6">
                                    </div>
                                    
                                    
                                    <div class="alen_table_half alen_table_last">
                                      <input readonly="readonly" type="text" placeholder="남은시간" id="certNumView" style="text-align: right;">
                                    </div>
                                </div>
                                
                                <hr>
                                </li>
                                
                            </ul>
                            
                            
                        </div>
                        
                        <div class="agree_btnbox" id="agreeComple">
                            <div class="agree_btn">완료</div>
                        </div>
                    
                    
                    </div>
                </div>
                

			</div>

		</div>
    </div>




<script type="text/javascript" src="../js/framework7.js"></script>

<script type="text/javascript" src="../js/my-app.js"></script>

<input value="activate scrollator" id="activate_scrollator4" type="button"  style="display:none;">
<script type="text/javascript">
//전체동의여부 변수값.
var agreeDiv = false;
$(document).ready(function(){
	$("#recNum").click(function(){
		time = "10";
		clearInterval(runCount);
		fncCountDown();
		//setInterval("startCountDown()", 1000);
	})
	$("#agreeComple").click(function(){
    	var userNm = alltrim($("#userNm").val());
    	var eMail = alltrim($("#eMail").val());
    	var birthDay = alltrim($("#birthDay").val());
		var sex = $(':radio[name="sex"]:checked').val();
		var nation = $(':radio[name="nation"]:checked').val();
		var tService = $(':radio[name="tservice"]:checked').val();
    	var certNum = alltrim($("#certNum").val());
    	var telNo = alltrim($("#telNo").val());
		//isNull함수가 true이면 빈값; 
		if(isNull(userNm)){
			alert("이름을 기입해주시기 바랍니다.");  
			return false;
		}
		if(isNull(eMail)){
			alert("이메일을 기입해주시기 바랍니다.");  
			return false;
		}else {
			if(!emailcheck(eMail)){
				alert("이메일을 정확하게 기입해주시기 바랍니다.");  
				return false;
			};
		}
		if(isNull(birthDay)){
			alert("생년월일을 기입해 주시기바랍니다.");  
			return false;
		}
		if(isNull(sex)){
			alert("성별을 체크해주시기 바랍니다.");  
			return false;
		}
		if(isNull(nation)){
			alert("내/외국인 구분을 체크해주시기 바랍니다.");  
			return false;
		}
		if(isNull(tService)){
			alert("이동통신사를 체크해주시기 바랍니다.");  
			return false;
		}
		if(isNull(certNum)){
			alert("인증번호를 기입해주시기 바랍니다.");  
			return false;
		}
		if(isNull($("#certNumView").val())){
			alert("인증번호를 재발급 받으시기 바랍니다.");
			return false;
		}		
		
	    $.ajax({
	        type: "post",
	        url : commonIp()+"/theReal/receipt/appMemberInsert.do",
	        data: {
	        	userNm  	: userNm,  
	        	eMail   		: eMail,   
	        	birthDay		: birthDay,
	        	sex     		: sex,
	        	nation  		: nation,  
	        	tService		: tService,
	        	telNo 		: telNo ,
	        	kakao 		: certNum+birthDay 
	        },
	        success: fnSucData,
	        error: whenError
	    	});		
		
	})
	
});


	var min = 0;
	var sec = 0;
	var time = 0;
	var runCount;
	
	// 시작 함수 호출 시
	function fncCountDown() {
	
	 // 입력 값 셋팅
	
	 if ( time.length > 0 ) {
	  runCount = setInterval("startCountDown()", 1000);
	
	 } else {
	  alert("값을 입력 해 주세요");
	  return;
	
	 }
	}
	
	// 카운트 다운 및 노출하기
	function startCountDown() {
	
	 min = parseInt((time%3600)/60);
	 sec = time%60;
	 console.log(min + " : " + sec);
	 $("#certNumView").val(min + " : " + sec);
	
	 // 시간이 다 됐을 시 timer 정지
	 if ( parseInt(time) == 0 ) {
		 $("#certNumView").val("");
	  stopCountDown();
	
	 } else {
	  time--;
	 }
	
	}

// 타이머 정지
function stopCountDown() {
	clearInterval(runCount);
}

function fnSucData(resdata){
	alert("성공.");
	alert(resdata);
}

function whenError(){
	alert("실패.");
}


</script>
</body>
</html>
